/*! angular-detour - v0.1.0 - 2013-06-01
 * https://github.com/afterglowtech/angular-detour
 * Copyright (c) 2013 Stu Salsbury;
 *    Based on and uses software code found at https://github.com/angular-ui/ui-router which is 
 *    Copyright (c) 2013, Karsten Sperling
 * Licensed MIT
 */
(function(){"use strict";function t(t,e){return d(new(d(function(){},{prototype:t})),e)}function e(t){return f(arguments,function(e){e!==t&&f(e,function(e,r){t.hasOwnProperty(r)||(t[r]=e)})}),t}function r(t,e,r){this.fromConfig=function(t,e,r){return l(t.template)?this.fromString(t.template,e):l(t.templateUrl)?this.fromUrl(t.templateUrl,e):l(t.templateProvider)?this.fromProvider(t.templateProvider,e,r):l(t.templateService)?this.fromService(t.templateService,e,r):null},this.fromString=function(t,e){return u(t)?t(e):t},this.fromUrl=function(r,n){return u(r)&&(r=r(n)),null==r?null:t.get(r,{cache:e}).then(function(t){return t.data})},this.fromProvider=function(t,e,n){return r.invoke(t,null,n||{params:e})},this.fromService=function(t,e,n){return r.invoke([t,function(t){return t.getTemplate(e,n)}])}}function n(t){function e(e){if(!/^\w+$/.test(e))throw Error("Invalid parameter name '"+e+"' in pattern '"+t+"'");if(a[e])throw Error("Duplicate parameter name '"+e+"' in pattern '"+t+"'");a[e]=!0,u.push(e)}function r(t){return t.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&")}var n,i=/([:*])(\w+)|\{(\w+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,a={},o="^",s=0,l=this.segments=[],u=this.params=[];this.source=t;for(var c,h,p;(n=i.exec(t))&&(c=n[2]||n[3],h=n[4]||("*"===n[1]?".*":"[^/]*"),p=t.substring(s,n.index),!(p.indexOf("?")>=0));)o+=r(p)+"("+h+")",e(c),l.push(p),s=i.lastIndex;p=t.substring(s);var d=p.indexOf("?");if(d>=0){var g=this.sourceSearch=p.substring(d);p=p.substring(0,d),this.sourcePath=t.substring(0,s+d),f(g.substring(1).split(/[&?]/),e)}else this.sourcePath=t,this.sourceSearch="";o+=r(p)+"$",l.push(p),this.regexp=RegExp(o),this.prefix=l[0]}function i(){this.compile=function(t){return new n(t)},this.isMatcher=function(t){return t instanceof n},this.$get=function(){return this}}function a(){function t(t,r,n){function i(){function r(e){var r=t.defer();return n({method:"GET",url:e}).success(function(t){console.log(t),r.resolve(angular.fromJson(t))}).error(function(){r.resolve(null)}),r.promise}this._getRouteUrl=e.getRouteUrl,this._getStateUrl=e.getStateUrl,this._knownStatesParameter=e.knownStatesParameter,this._routeParameter=e.routeParameter,this._stateParameter=e.stateParameter,this._getUpdatesUrl=e.getUpdatesUrl,this.getRoute=function(t,e){var n=this.getRouteUrl+"?"+this.routeParameter+"="+encodeURIComponent(t)+"&"+this.knownStatesParameter+"="+encodeURIComponent(angular.toJson(e));return r(n)},this.getState=function(t,e){var n=this.getStateUrl+"?"+this.stateParameter+"="+encodeURIComponent(t)+"&"+this.knownStatesParameter+"="+encodeURIComponent(angular.toJson(e));return r(n)}}return Object.defineProperty(i.prototype,"getRouteUrl",{get:function(){return this._getRouteUrl},set:function(t){this._getRouteUrl=t}}),Object.defineProperty(i.prototype,"getStateUrl",{get:function(){return this._getStateUrl},set:function(t){this._getStateUrl=t}}),Object.defineProperty(i.prototype,"knownStatesParameter",{get:function(){return this._knownStatesParameter},set:function(t){this._knownStatesParameter=t}}),Object.defineProperty(i.prototype,"routeParameter",{get:function(){return this._routeParameter},set:function(t){this._routeParameter=t}}),Object.defineProperty(i.prototype,"stateParameter",{get:function(){return this._stateParameter},set:function(t){this._stateParameter=t}}),Object.defineProperty(i.prototype,"getUpdatesUrl",{get:function(){return this._getUpdatesUrl},set:function(t){this._getUpdatesUrl=t}}),new i}var e=this;this.getRouteUrl=null,this.getStateUrl=null,this.knownStatesParameter="k",this.routeParameter="r",this.stateParameter="s",this.getUpdatesUrl=null,t.$inject=["$q","$location","$http"],this.$get=t}function o(r){function n(){this._children={}}function i(){this.locals={globals:{$stateParams:{}}},this.serial=0,this.resetAll()}function a(t){var e=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(t.source);return null!==e?e[1].replace(/\\(.)/g,"$1"):""}function o(t,e){return t.replace(/\$(\$|\d{1,2})/,function(t,r){return e["$"===r?0:Number(r)]})}function s(t,e,r){if(!r)return!1;var n=t.invoke(e,e,{$match:r});return l(n)?n:!0}function d(t,e){return e.fullName=t,C.setState(e),this}function y(t){return C.fallback=t,this}function $(){C.initialize()}function P(t){var e=this.getState(t);return e&&e.parent.removeChild(e.localName),this}function b(t){return C.setState(t)}function S(t){return C.updateState(t)}function w(t){return C.getState(t)}function x(t){return C.mergeJson(t)}function U(r,n,i,a,o,s,l){function u(e,i,l,c){var f=C.getState(e);if(f||!J||c){if(e=f,angular.isDefined(l)||(l=!0),e["abstract"])throw Error("Cannot transition to abstract state '"+e+"'");var d,m,v=e.path,y=k.$current,$=k.params,P=y.path,b=C.locals,S=[];for(d=0,m=v[d];m&&m===P[d]&&g(i,$,m.ownParams);d++,m=v[d])b=S[d]=m.locals;if(e===y&&b===y.locals)return k.transition=null,n.when(k.current);if(i=p(e.preparedParams,i||{}),r.$broadcast("$stateChangeStart",e.self,i,y.self,$).defaultPrevented)return O;for(var w=n.when(b),x=d;v.length>x;x++,m=v[x])b=S[x]=t(b),w=h(m,i,m===e,w,b);var j=k.transition=w.then(function(){var t,n,u;if(k.transition!==j)return _;for(t=P.length-1;t>=d;t--)u=P[t],u.self.onExit&&a.invoke(u.self.onExit,u.self,u.locals.globals),u.locals=null;for(t=d;v.length>t;t++)n=v[t],n.locals=S[t],n.self.onEnter&&a.invoke(n.self.onEnter,n.self,n.locals.globals);k.$current=e,k.current=e.self,k.params=i,angular.copy(k.params,o),k.transition=null;var c=e.navigable;return l&&c&&s.url(c.preparedUrl.format(c.locals.globals.$stateParams)),r.$broadcast("$stateChangeSuccess",e.self,i,y.self,$),k.current},function(t){return k.transition!==j?_:(k.transition=null,r.$broadcast("$stateChangeError",e.self,i,y.self,$,t),n.reject(t))});return j}return U(e).then(function(){return u(e,i,l,!0)})}function h(t,r,o,s,u){var c=[];return t.dependencies&&c.push(n.when(a.invoke(l.resolveDependencies(t.dependencies)))),n.all(c).then(function(){function l(e,r){angular.forEach(e,function(e,i){p.push(n.when(angular.isString(e)?a.get(e):a.invoke(e,t.self,d)).then(function(t){r[i]=t}))})}function c(t,e){angular.forEach(t,function(t,r){p.push(n.when(a.invoke([t,function(t){return t.resolve(h,d)}])).then(function(t){e[r]=t}))})}var h,p=[s];o?h=r:(h={},angular.forEach(t.preparedParams,function(t){h[t]=r[t]}));var d={$stateParams:h},g=u.globals={$stateParams:h};return l(t.resolve,g),c(t.resolveByService,g),g.$$state=t,angular.forEach(t.preparedViews,function(e,r){var a=u[r]={$$controller:e.controller};p.push(n.when(i.fromConfig(e,h,d)||"").then(function(t){a.$template=t})),e.resolve!==t.resolve&&l(e.resolve,a)}),n.all(p).then(function(r){return e(u.globals,r[0].globals),f(t.preparedViews,function(t,r){e(u[r],u.globals)}),u})})}function p(t,e){var r={};return f(t,function(t){var n=e[t];r[t]=null!=n?n+"":null}),r}function g(t,e,r){for(var n=0;r.length>n;n++){var i=r[n];if(t[i]!=e[i])return!1}return!0}function m(t,e,r,n){var i=!J||n,o=C.tryHandle(a,s,i);o&&c(o)&&s.replace().url(o),o||n||!J||v(s.path()).then(function(){m(t,e,r,!0)})}function v(t){var e=n.defer();return N.getRoute(t,C.knownStates).then(function(t){t&&C.mergeJson(t),e.resolve()}),e.promise}function U(t){var e=n.defer();return N.getState(t,C.knownStates).then(function(t){t&&C.mergeJson(t),e.resolve()}),e.promise}var _=n.reject(Error("transition superseded")),O=n.reject(Error("transition prevented")),k={params:{},current:C.self,$current:C,transition:null},J=j.lazy,N=null;return k.setStateLoader=function(t){N=t},k.registerValue=l.registerValue,k.registerFactory=l.registerFactory,k.registerFilter=l.registerFilter,k.registerDirective=l.registerDirective,k.registerController=l.registerController,k.state=d,k.otherwise=y,k.initialize=$,k.setState=b,k.updateState=S,k.getState=w,k.removeState=P,k.mergeJson=x,k.transitionTo=u,k.is=function(t){return k.$current===C.getState(t)},k.includes=function(t){var e=C.getState(t);return e?k.$current.includes[e.name]:!1},k.href=function(t,e){var r=this.getState(t),n=r.navigable;if(!n)throw Error("State '"+r+"' is not navigable");return n.url.format(p(r.preparedParams,e||{}))},r.$on("$locationChangeSuccess",m),k}var j=this;Object.defineProperty(n.prototype,"self",{get:function(){return this}}),n.prototype.resetAll=function(){this.resetFullName(),this.resetUrl(),this.resetParams(),this.resetNavigable(),this.resetPath(),this.resetViews(),this.resetIncludes(),this.resetHandlers()},n.prototype.initialize=function(t){if(this.needsInit||t){this.resetAll();for(var e in this.children)this.children[e].initialize(!0);this.needsInit=!1}},Object.defineProperty(n.prototype,"fullName",{get:function(){return this._fullName}}),Object.defineProperty(n.prototype,"name",{get:function(){return this._fullName}}),Object.defineProperty(n.prototype,"localName",{get:function(){return this._localName},set:function(t){this.validateName(t),this._localName=t,this.needsInit=!0}}),n.prototype.resetFullName=function(){this._fullName=this.parent.fullName?this.parent.fullName+"."+this.localName:this.localName},n.prototype.toString=function(){return this.fullName},n.prototype.validateName=function(t){if(!angular.isString(t)||t.indexOf("@")>=0)throw Error("Invalid local state name ("+t+")")},Object.defineProperty(n.prototype,"root",{get:function(){return this.parent.root}}),Object.defineProperty(n.prototype,"children",{get:function(){return this._children},set:function(t){if(this._children=t,this._children)for(var e in this._children)this._children[e].parent=this}}),n.prototype.resetPath=function(){this.path=this.parent.path.concat(this)},Object.defineProperty(n.prototype,"url",{get:function(){return this._url},set:function(t){this._url=t,this.needsInit=!0}}),Object.defineProperty(n.prototype,"aliases",{get:function(){return this._aliases},set:function(t){this._aliases=t,this.needsInit=!0}}),n.prototype.resetUrl=function(){if(this.preparedUrl=null,angular.isString(this.url))this.preparedUrl="^"===this.url.charAt(0)?r.compile(this.url.substring(1)):(this.parent.navigable||this.root).preparedUrl.concat(this.url);else if(h(this.url)&&u(this.url.exec)&&u(this.url.format)&&u(this.url.concat))this.preparedUrl=this.url;else if(null!=this.url)throw Error("Invalid url "+this.url+" in state "+this)},Object.defineProperty(n.prototype,"params",{get:function(){return this._params},set:function(t){this._params=t,this.needsInit=!0}}),n.prototype.resetParams=function(){this.preparedParams=null;var t=this.params;if(t){if(!p(t))throw Error("Invalid params in state '"+this+"'");if(this.preparedUrl)throw Error("Both params and url specicified in state '"+this+"'");this.perparedParams=t}else this.preparedParams=this.preparedUrl?this.preparedUrl.parameters():this.parent.preparedParams;var e={};if(f(this.preparedParams,function(t){e[t]=!0}),this.parent){var r=this;f(this.parent.preparedParams,function(t){if(!e[t])throw Error("Missing required parameter '"+t+"' in state '"+r.name+"'");e[t]=!1});var n=this.ownParams=[];f(e,function(t,e){t&&n.push(e)})}else this.ownParams=this.preparedParams},n.prototype.resetNavigable=function(){this.navigable=this.url?this:this.parent?this.parent.navigable:null},Object.defineProperty(n.prototype,m,{get:function(){return this._abstract},set:function(t){this._abstract=t,this.needsInit=!0}}),n.prototype.resetIncludes=function(){this.includes=this.parent?angular.extend({},this.parent.includes):{},this.includes[this.name]=!0},Object.defineProperty(n.prototype,"views",{get:function(){return this._views},set:function(t){this._views=t,this.needsInit=!0}}),n.prototype.resetViews=function(){var t=this,e={},r=this.views;angular.forEach(angular.isDefined(r)?r:{"":t},function(r,n){0>n.indexOf("@")&&(n=n+"@"+t.parent.name),e[n]=r}),this.preparedViews=e},n.prototype._buildRule=function(t,e){var n,i;if(c(t)&&(t=r.compile(t)),r.isMatcher(t)){if(c(e))i=r.compile(e),e=[g,function(t){return i.format(t)}];else if(!u(e)&&!p(e))throw Error("invalid 'handler' in when()");n=function(r,n){return s(r,e,t.exec(n.path(),n.search()))},n.prefix=c(t.prefix)?t.prefix:""}else{if(!(t instanceof RegExp))throw Error("invalid 'what' in when()");if(c(e))i=e,e=[g,function(t){return o(i,t)}];else if(!u(e)&&!p(e))throw Error("invalid 'handler' in when()");if(t.global||t.sticky)throw Error("when() RegExp must not be global or sticky");n=function(r,n){return s(r,e,t.exec(n.path()))},n.prefix=a(t)}return n},n.prototype.resetHandlers=function(){if(this[m]||!this.preparedUrl)return this.handleUrl=null,void 0;var t=this.preparedUrl,e=this,r=[g,v,function(t,r){r.transitionTo(e,t,!1)}];this.handleUrl=this._buildRule(t,r),this.preparedAliases=[],this.aliases&&angular.forEach(this.aliases,function(t,r){t="^"===t.charAt(0)?t.substring(1):(e.parent.navigable||e.root).preparedUrl.concat(t).source,e.preparedAliases.push(e._buildRule(r,t))})},n.prototype.tryHandle=function(t,e){var r=!1;if(this.handleUrl){r=this.handleUrl(t,e);for(var n=0;this.preparedAliases.length>n&&!r;n++)r=this.preparedAliases[n](t,e)}if(!r)for(var i in this.children)if(r=this.children[i].tryHandle(t,e))break;return r},n.prototype.getChild=function(t){return this.children?this.children[t]:null},n.prototype.setChild=function(t,e){var r=new n;return angular.extend(r,t),this.setChildState(r,e)},n.prototype.removeChild=function(t){return this.children[t]&&delete this.children[t],this},n.prototype.setChildState=function(t,e){if(!e){var r=this.getChild(t.localName),n=r?r.children:null;n&&(t._children=n)}return this.children[t.localName]=t,t.parent=this,this.needsInit=!0,t},n.prototype.updateChild=function(t){var e=this.getChild(t.localName);return e?(angular.extend(e,t),this.setChildState(e,!1)):this.setChild(t,!0)},n.prototype.prepFlatGetParent=function(t){var e,r;if(t.parent)e=this.getState(t.parent),r=t.fullName;else{var n=t.fullName?t.fullName:t.name,i=/^(.*?)\.?([^\.]*)$/.exec(n),a=i[1];r=i[2],e=a?this.getState(a):this.root}return t.localName=r,delete t.name,delete t.fullName,delete t.parent,e},n.prototype.setState=function(t,e){var r=this.prepFlatGetParent(t);return r.setChild(t,e)},n.prototype.updateState=function(t){var e=this.prepFlatGetParent(t);return e.updateChild(t)},n.prototype.findState=function(t){var e=/^([^\.]+)(\.(.*))?$/.exec(t),r=e[1];if(this.localName===r){var n=e[3];return n?this.findStateChildren(n):this}return null},n.prototype.findStateChildren=function(t){if(this.children)for(var e in this.children){var r=this.children[e].findState(t);if(r)return r}return null},n.prototype.getState=function(t){return angular.isString(t)?this.root.findStateChildren(t):this.root.findStateChildren(t.fullName)},n.prototype.getIntJson=function(t,e,r){return t[r]?parseInt(t[r],10):t[e]?parseInt(t[e],10):null},n.prototype.getObjJson=function(t,e,r){return t[r]?t[r]:t[e]?t[e]:null},n.prototype.expandDefinition=function(t){this.expandJson(t,"url","u"),this.expandJson(t,"dependencies","d"),this.expandJson(t,"resolveByService","r"),this.expandJson(t,"templateService","i"),this.expandJson(t,"aliases","s"),this.expandJson(t,"controller","c"),this.expandJson(t,"templateUrl","t"),this.expandJson(t,"template","l"),this.expandJson(t,"data","a"),this.expandJson(t,"abstract","b"),this.expandJson(t,"views","v")},n.prototype.expandView=function(t){this.expandJson(t,"url","u"),this.expandJson(t,"resolveByService","r"),this.expandJson(t,"templateService","i"),this.expandJson(t,"controller","c"),this.expandJson(t,"templateUrl","t"),this.expandJson(t,"template","l"),this.expandJson(t,"data","a")},n.prototype.expandJson=function(t,e,r){t[r]&&(t[e]=t[r],delete t[r])},n.prototype.mergeChild=function(t,e){var r=this.getObjJson(e,"delete","x");if(r)this.removeChild(t);else{var n=this.getObjJson(e,"definition","d");if(n){if(n.localName=t,this.expandDefinition(n),n.views)for(var i in n.views){var a=n.views[i];this.expandView(a)}this.updateChild(n)}var o=this.getObjJson(e,"children","c");if(o){var s=this.getChild(t);for(var l in o){var u=o[l];s.mergeChild(l,u)}}}return!0},Object.defineProperty(n.prototype,"knownStates",{get:function(){var t={};if(Object.keys(this.children).length>0){var e={};for(var r in this.children){var n=this.children[r];e[n.localName]=n.knownStates}t=e}return t}}),i.prototype=new n,i.prototype.constructor=i,i.prototype.initialize=function(){for(var t in this.children)this.children[t].initialize(!1);this.needsInit=!1},i.prototype.tryHandle=function(t,e,r){var i=this,a=n.prototype.tryHandle.call(i,t,e);return!a&&r&&this.fallback&&(a=this.fallback(t,e)),a},Object.defineProperty(i.prototype,"fallback",{get:function(){return this._fallback},set:function(t){if(c(t)){var e=t;this._fallback=e?function(){return e}:null}else if(!u(rule))throw Error("'rule' must be a function")}}),i.prototype.resetFullName=function(){},i.prototype.resetPath=function(){},Object.defineProperty(i.prototype,"name",{get:function(){return""}}),Object.defineProperty(i.prototype,"localName",{get:function(){return""}}),Object.defineProperty(i.prototype,"url",{get:function(){return"^"}}),Object.defineProperty(i.prototype,"views",{get:function(){return{}}}),Object.defineProperty(i.prototype,"abstract",{get:function(){return!0}}),Object.defineProperty(i.prototype,"path",{get:function(){return[]}}),Object.defineProperty(i.prototype,"root",{get:function(){return this}}),Object.defineProperty(i.prototype,"isRoot",{get:function(){return!0}}),Object.defineProperty(i.prototype,"fullName",{get:function(){return null}}),Object.defineProperty(i.prototype,"navigable",{get:function(){return null},set:function(){}}),i.prototype.mergeJson=function(t){var e=this.getIntJson(t,"serial","s");if(e&&this.serial>=e)return!1;var r=this.getObjJson(t,"tree","t");if(r)for(var n in r){var i=r[n];this.mergeChild(n,i)}var a=this.getObjJson(t,"fallback","f");return a&&(this.fallback=a),this.serial=e,this.initialize(),!0},Object.defineProperty(i.prototype,"knownStates",{get:function(){var t={s:this.serial,f:this.fallback},e={};for(var r in this.children){var n=this.children[r];e[r]=n.knownStates}return t.t=e,t}});var C=new i;this.state=d,this.otherwise=y,this.initialize=$,this.removeState=P,this.setState=b,this.updateState=S,this.getState=w,this.mergeJson=x,this.lazy=!1,U.$inject=["$rootScope","$q","$templateFactory","$injector","$stateParams","$location","$couchPotato","$stateLoader"],this.$get=U}function s(t,e,r,n,i){var a;try{a=n.get("$animator")}catch(o){}var s={restrict:"ECA",terminal:!0,link:function(n,o,u){function c(a){var s=t.$current&&t.$current.locals[d];if(s!==p)if(m&&a?m.leave(o.contents(),o):o.html(""),h&&(h.$destroy(),h=null),s){p=s,y.state=s.$$state;var l;m&&a?(l=angular.element("<div></div>").html(s.$template).contents(),m.enter(l,o)):(o.html(s.$template),l=o.contents());var u=e(l);if(h=n.$new(),s.$$controller){s.$scope=h;var c=r(s.$$controller,s);o.children().data("$ngControllerController",c)}u(h),h.$emit("$viewContentLoaded"),h.$eval(g),i()}else p=null,y.state=null,a?m.enter(f,o):o.html(f)}var h,p,f=o.contents(),d=u[s.name]||u.name||"",g=u.onload||"",m=l(a)&&a(n,u),v=o.parent().inheritedData("$uiView");0>d.indexOf("@")&&(d=d+"@"+(v?v.state.name:""));var y={name:d,state:null};o.data("$uiView",y),n.$on("$stateChangeSuccess",function(){c(!0)}),c(!1)}};return s}(function(){function t(t,e,r,n){function i(t){r.value.apply(null,t)}function a(t){r.factory.apply(null,t)}function o(t){n.register.apply(null,t)}function s(t){e.directive.apply(null,t)}function l(e){t.register.apply(null,e)}function u(t){function e(e,r){var n=e.defer();return require(t,function(){n.resolve(),r.$apply()}),n.promise}return e.$inject=["$q","$rootScope"],e}function c(t){if(t.dependencies){var e=t,r=t.dependencies;return delete e.dependencies,e.resolve={},e.resolve.delay=u(r),e}return t}this.resolveDependencies=u,this.resolveDependenciesProperty=c,this.$get=function(){var t={};return t.registerValue=i,t.registerFactory=a,t.registerFilter=o,t.registerDirective=s,t.registerController=l,t.resolveDependenciesProperty=c,t.resolveDependencies=u,t}}var e=angular.module("agt.couchPotato",["ng"]);t.$inject=["$controllerProvider","$compileProvider","$provide","$filterProvider"],e.provider("$couchPotato",t)})();var l=angular.isDefined,u=angular.isFunction,c=angular.isString,h=angular.isObject,p=angular.isArray,f=angular.forEach,d=angular.extend;angular.copy,angular.module("agt.detour",["ng","agt.couchPotato"]),r.$inject=["$http","$templateCache","$injector"],angular.module("agt.detour").service("$templateFactory",r),n.prototype.concat=function(t){return new n(this.sourcePath+t+this.sourceSearch)},n.prototype.toString=function(){return this.source},n.prototype.exec=function(t,e){var r=this.regexp.exec(t);if(!r)return null;var n,i=this.params,a=i.length,o=this.segments.length-1,s={};for(n=0;o>n;n++)s[i[n]]=decodeURIComponent(r[n+1]);for(;a>n;n++)s[i[n]]=e[i[n]];return s},n.prototype.parameters=function(){return this.params},n.prototype.format=function(t){var e=this.segments,r=this.params;if(!t)return e.join("");var n,i,a,o=e.length-1,s=r.length,l=e[0];for(n=0;o>n;n++)a=t[r[n]],null!=a&&(l+=a),l+=e[n+1];for(;s>n;n++)a=t[r[n]],null!=a&&(l+=(i?"&":"?")+r[n]+"="+encodeURIComponent(a),i=!0);return l},angular.module("agt.detour").provider("$urlMatcherFactory",i),angular.module("agt.detour").provider("$stateLoader",a);var g="$match",m="abstract",v="$detour";o.$inject=["$urlMatcherFactoryProvider"],angular.module("agt.detour").value("$stateParams",{}).provider(v,o),s.$inject=["$detour","$compile","$controller","$injector","$anchorScroll"],angular.module("agt.detour").directive("uiView",s)})();